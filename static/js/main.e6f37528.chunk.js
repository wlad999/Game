(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(9),i=n.n(o),u=(n(16),n(10)),s=n(2),l=(n(17),n(3)),d=(n(18),n(4)),j=n.n(d);function f(e){return new Array(e).fill().map((function(t,n){return function(t){return new Array(e).fill().map((function(n,a){return{id:t*e+1+a,color:null}}))}(n)}))}function b(e){var t=e.squareData,n=e.setSquareData,c=e.count,r=e.setWinner,o=0,i=0,u=c*c;return t.map((function(e){return Object(a.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:e.map((function(e){return"#00E871"===e.color&&(i+=1),"#E85A5F"===e.color&&(o+=1),i/u>.5&&r("User"),o/u>.5&&r("Computer"),Object(a.jsx)("div",{style:{width:"calc(36vw/".concat(c,")"),height:"calc(36vw/".concat(c,")"),outline:"2px solid #EFEFF1",background:"".concat(e.color),cursor:"pointer"},onClick:function(){return function(e){var t=e.id,n=e.squareData,a=e.setSquareData,c=n.map((function(e){return e.map((function(e){return e.id===t&&"#42D8E8"===e.color?Object(l.a)(Object(l.a)({},e),{},{color:"#00E871"}):e}))}));a(c)}({id:e.id,squareData:t,setSquareData:n})},children:e.id},j()())}))},j()())}))}function O(e){var t,n=e.count,a=e.setSquareData,c=e.delay,r=e.idTimeOut,o=e.setIdTimeOut;a((function(e){return t=function(e){for(var t,n=e.squareData,a=e.count,c=function(){var e=Math.ceil(Math.random()*(a*a));n.map((function(n){return n.map((function(n){n.id!==e||n.color||(t=e)}))}))};!t&&n.length;)c();return t}({squareData:e,count:n}),e.map((function(e){return e.map((function(e){return e.id===t?Object(l.a)(Object(l.a)({},e),{},{color:"#42D8E8"}):e}))}))})),o(setTimeout((function(){a((function(e){return e.map((function(e){return e.map((function(e){return e.id===t&&"#42D8E8"===e.color?Object(l.a)(Object(l.a)({},e),{},{color:"#E85A5F"}):e}))}))})),clearTimeout(r)}),c))}var m=function(e){var t=e.currentMode,n=e.play,r=e.setWinner,o=Object(c.useState)(t),i=Object(s.a)(o,2),u=i[0],l=i[1],d=Object(c.useState)([]),j=Object(s.a)(d,2),m=j[0],h=j[1],p=Object(c.useState)(null),v=Object(s.a)(p,2),g=v[0],y=v[1],x=Object(c.useState)(null),S=Object(s.a)(x,2),w=S[0],E=S[1],M=Object(c.useState)(null),D=Object(s.a)(M,2),k=D[0],T=D[1];return Object(c.useEffect)((function(){l(t)}),[t]),Object(c.useEffect)((function(){var e=f(u.field);h(e),clearTimeout(w),clearInterval(g)}),[u]),Object(c.useEffect)((function(){var e=b({squareData:m,setSquareData:h,count:u.field,setWinner:r});T(e)}),[m]),Object(c.useEffect)((function(){if(n||(clearInterval(g),clearTimeout(w)),n){r(null);var e=f(u.field);h(e)}n&&y(setInterval(O,u.delay,{count:u.field,setSquareData:h,delay:u.delay,idTimeOut:w,setIdTimeOut:E}))}),[n]),Object(a.jsx)("div",{children:k})},h=(n(27),function(e){var t=e.renderMode,n=e.setPlayToggle,c=e.play,r=e.winner,o=e.name,i=e.setName;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"control",children:[Object(a.jsx)("div",{className:"modeList",children:t}),Object(a.jsx)("input",{placeholder:"Enter your name",value:o,onChange:function(e){return i(e)}}),Object(a.jsx)("button",{onClick:n,children:c&&!r?"STOP":c||r?"PLAY AGAIN":"PLAY"})]}),r&&Object(a.jsxs)("h2",{children:[o||r," won"]})]})}),p=function(e){var t=e.gameMode,n=e.setLeaderList,r=Object(c.useState)(Object(l.a)({level:"easyMode"},t.easyMode)),o=Object(s.a)(r,2),i=o[0],u=o[1],d=Object(c.useState)(""),f=Object(s.a)(d,2),b=f[0],O=f[1],p=Object(c.useState)(!1),v=Object(s.a)(p,2),g=v[0],y=v[1],x=Object(c.useState)(null),S=Object(s.a)(x,2),w=S[0],E=S[1];Object(c.useEffect)((function(){w&&y(!1);var e=function(e){var t=e.winner,n=e.name,a=new Date,c="".concat(a.toLocaleTimeString().slice(0,-3),"; ").concat(a.toLocaleDateString().slice(0,-8)," ").concat(a.toLocaleString("en",{month:"long"})," ").concat(a.getFullYear());return{winner:n?n.slice(0,12):t,date:c}}({winner:w,name:b});w&&fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return n(e)})).catch(console.log("Some problem with getting leaders list"))}),[w]);var M=function(e){var t=e.gameMode,n=e.setCurrentMode,c=Object.keys(t);return Object(a.jsxs)("select",{id:"select",value:"Pick game mode",onChange:function(e){return n(Object(l.a)({level:e.target.value},t[e.target.value]))},children:[Object(a.jsx)("option",{disabled:!0,style:{display:"none"},children:"Pick game mode"}),c.map((function(e){return Object(a.jsx)("option",{value:e,children:e},j()())}))]})}({gameMode:t,setCurrentMode:u});return Object(a.jsxs)("div",{className:"gameFieldContainer",children:[Object(a.jsx)(h,{renderMode:M,setPlayToggle:function(){y((function(e){return!e}))},play:g,winner:w,name:b,setName:function(e){return g||w?null:O(e.target.value)}}),Object(a.jsx)(m,{currentMode:i,play:g,setWinner:E})]})},v=(n(28),function(e){var t=e.list;return Object(a.jsxs)("div",{className:"leaderContainer",children:[Object(a.jsx)("span",{children:"Leader Board"}),Object(a.jsx)("ul",{children:t||"Some problem with getting leaders list"})]})}),g={easyMode:{field:5,delay:2e3},normalMode:{field:10,delay:1e3},hardMode:{field:15,delay:900}};var y=function(){var e=Object(c.useState)(g),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)([]),i=Object(s.a)(o,2),l=i[0],d=i[1];Object(c.useEffect)((function(){fetch("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(e){return d(e)})).catch(console.log("Some problem with getting leaders list"))}),[]),Object(c.useEffect)((function(){fetch("https://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(e){return e.json()})).then((function(e){return r(e)})).catch(r(g))}),[]);var f=l.length&&Object(u.a)(l).reverse().map((function(e){return Object(a.jsxs)("li",{className:"line",children:[Object(a.jsx)("span",{className:"winner",children:e.winner}),e.date]},j()())}));return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(p,{gameMode:n,setLeaderList:d}),Object(a.jsx)(v,{list:f})]})};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(y,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.e6f37528.chunk.js.map