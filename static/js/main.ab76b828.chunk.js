(this.webpackJsonpgame=this.webpackJsonpgame||[]).push([[0],{16:function(e,t,n){},17:function(e,t,n){},26:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),o=n(9),i=n.n(o),u=(n(16),n(2)),s=n(3),l=(n(17),n(4)),d=n.n(l);function j(e){return new Array(e).fill().map((function(t,n){return function(t){return new Array(e).fill().map((function(n,r){return{id:t*e+1+r,color:null}}))}(n)}))}function f(e){var t=e.squareData,n=e.setSquareData,a=e.count,c=e.setWinner,o=0,i=0,u=a*a;return t.map((function(e){return Object(r.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:e.map((function(e){return"#00E871"===e.color&&(i+=1),"#E85A5F"===e.color&&(o+=1),i/u>.5&&c("User"),o/u>.5&&c("Computer"),Object(r.jsx)("div",{style:{width:"calc(36vw/".concat(a,")"),height:"calc(36vw/".concat(a,")"),outline:"2px solid #EFEFF1",background:"".concat(e.color),cursor:"pointer"},onClick:function(){return function(e){var t=e.id,n=e.squareData,r=e.setSquareData,a=n.map((function(e){return e.map((function(e){return e.id===t&&"#42D8E8"===e.color?Object(s.a)(Object(s.a)({},e),{},{color:"#00E871"}):e}))}));r(a)}({id:e.id,squareData:t,setSquareData:n})},children:e.id},d()())}))},d()())}))}function b(e){var t,n=e.count,r=e.setSquareData,a=e.delay,c=e.idTimeOut,o=e.setIdTimeOut;r((function(e){return t=function(e){for(var t,n=e.squareData,r=e.count,a=function(){var e=Math.ceil(Math.random()*(r*r));n.map((function(n){return n.map((function(n){n.id!==e||n.color||(t=e)}))}))};!t&&n.length;)a();return t}({squareData:e,count:n}),e.map((function(e){return e.map((function(e){return e.id===t?Object(s.a)(Object(s.a)({},e),{},{color:"#42D8E8"}):e}))}))})),o(setTimeout((function(){r((function(e){return e.map((function(e){return e.map((function(e){return e.id===t&&"#42D8E8"===e.color?Object(s.a)(Object(s.a)({},e),{},{color:"#E85A5F"}):e}))}))})),clearTimeout(c)}),a))}var O=n(10);var m=function(e){var t=e.currentMode,n=e.play,c=e.setWinner,o=Object(a.useState)(t),i=Object(u.a)(o,2),s=i[0],l=i[1],d=Object(a.useState)([]),O=Object(u.a)(d,2),m=O[0],h=O[1],p=Object(a.useState)(null),v=Object(u.a)(p,2),g=v[0],y=v[1],x=Object(a.useState)(null),S=Object(u.a)(x,2),w=S[0],E=S[1],M=Object(a.useState)(null),D=Object(u.a)(M,2),k=D[0],T=D[1];return Object(a.useEffect)((function(){l(t)}),[t]),Object(a.useEffect)((function(){var e=j(s.field);h(e),clearTimeout(w),clearInterval(g)}),[s]),Object(a.useEffect)((function(){var e=f({squareData:m,setSquareData:h,count:s.field,setWinner:c});T(e)}),[m]),Object(a.useEffect)((function(){if(n||(clearInterval(g),clearTimeout(w)),n){c(null);var e=j(s.field);h(e)}n&&y(setInterval(b,s.delay,{count:s.field,setSquareData:h,delay:s.delay,idTimeOut:w,setIdTimeOut:E}))}),[n]),Object(r.jsx)("div",{children:k})},h=(n(26),function(e){var t=e.renderMode,n=e.setPlayToggle,a=e.play,c=e.winner,o=e.name,i=e.setName;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("div",{className:"control",children:[Object(r.jsx)("div",{className:"modeList",children:t}),Object(r.jsx)("input",{placeholder:"Enter your name",value:o,onChange:function(e){return i(e)}}),Object(r.jsx)("button",{onClick:n,children:a&&!c?"STOP":a||c?"PLAY AGAIN":"PLAY"})]}),c&&Object(r.jsxs)("h2",{children:[o||c," won"]})]})}),p=function(e){var t=e.gameMode,n=e.setLeaderList,c=Object(a.useState)(Object(s.a)({level:"easyMode"},t.easyMode)),o=Object(u.a)(c,2),i=o[0],l=o[1],j=Object(a.useState)(""),f=Object(u.a)(j,2),b=f[0],O=f[1],p=Object(a.useState)(!1),v=Object(u.a)(p,2),g=v[0],y=v[1],x=Object(a.useState)(null),S=Object(u.a)(x,2),w=S[0],E=S[1];Object(a.useEffect)((function(){w&&y(!1);var e=function(e){var t=e.winner,n=e.name,r=new Date,a="".concat(r.toLocaleTimeString().slice(0,-3),"; ").concat(r.toLocaleDateString().slice(0,-8)," ").concat(r.toLocaleString("en",{month:"long"})," ").concat(r.getFullYear());return{winner:n?n.slice(0,12):t,date:a}}({winner:w,name:b});w&&fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return n(e)})).catch(console.log("Some problem with getting leaders list"))}),[w]);var M=function(e){var t=e.gameMode,n=e.setCurrentMode,a=Object.keys(t);return Object(r.jsxs)("select",{id:"select",value:"Pick game mode",onChange:function(e){return n(Object(s.a)({level:e.target.value},t[e.target.value]))},children:[Object(r.jsx)("option",{disabled:!0,style:{display:"none"},children:"Pick game mode"}),a.map((function(e){return Object(r.jsx)("option",{value:e,children:e},d()())}))]})}({gameMode:t,setCurrentMode:l});return Object(r.jsxs)("div",{className:"gameFieldContainer",children:[Object(r.jsx)(h,{renderMode:M,setPlayToggle:function(){y((function(e){return!e}))},play:g,winner:w,name:b,setName:function(e){return g||w?null:O(e.target.value)}}),Object(r.jsx)(m,{currentMode:i,play:g,setWinner:E})]})},v=(n(27),function(e){var t=e.list;return Object(r.jsxs)("div",{className:"leaderContainer",children:[Object(r.jsx)("span",{children:"Leader Board"}),Object(r.jsx)("ul",{children:t||"Some problem with getting leaders list"})]})}),g=(n(28),{easyMode:{field:5,delay:2e3},normalMode:{field:10,delay:1e3},hardMode:{field:15,delay:900}});var y=function(){var e=Object(a.useState)(g),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(u.a)(o,2),s=i[0],l=i[1];Object(a.useEffect)((function(){fetch("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(e){return l(e)})).catch(console.log("Some problem with getting leaders list"))}),[]),Object(a.useEffect)((function(){fetch("https://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(e){return e.json()})).then((function(e){return c(e)})).catch(c(g))}),[]);var j=function(e){var t=e.leadersArr;return t.length&&Object(O.a)(t).reverse().map((function(e){return Object(r.jsxs)("li",{className:"line",children:[Object(r.jsx)("span",{className:"winner",children:e.winner}),e.date]},d()())}))}({leadersArr:s});return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(p,{gameMode:n,setLeaderList:l}),Object(r.jsx)(v,{list:j})]})};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(y,{})}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.ab76b828.chunk.js.map